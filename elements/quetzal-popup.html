<!--
A UI element that appears temporarily over other things: popups, menus, dialogs,
combo boxes, tooltips, etc.

This extends polymer-overlay so that, if no target is supplied, the element
becomes its own target. That is, the element's own content is shown as the
popup.
-->

<link rel="import" href="../polymer-elements/polymer-overlay/polymer-overlay.html">

<polymer-element name="quetzal-popup" extends="polymer-overlay">

<template>

<style>
  /* Generic appearance */
:host {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.2);
  box-shadow: 0 2px 4px rgba( 0, 0, 0, 0.2 );
  box-sizing: border-box;
  padding: .25em;
  -webkit-user-select: none;
  user-select: none;
}
</style>

<shadow></shadow>
<content></content>

</template>

<script>
Polymer( "quetzal-popup", {

  close: function() {
    this.opened = false;
  },

  created: function() {
    this.super();
    if ( !this.target ) {
      // Default target is the popup itself.
      this.target = this;
    }
  },

  // Override base implementation to allow support for explicitly setting the
  // element which will recieve the focus when the overlay is open or closed.
  applyFocus: function() {
    var element = this.opened ? this.focusNodeOpened : this.focusNodeClosed;
    if ( element ) {
      element.focus();
    } else {
      // No node explicitly specified; use default focus behavior.
      this.super();
    }
  },

  get focusNodeClosed() {
    return this._focusNodeClosed;
  },
  set focusNodeClosed( element ) {
    this._focusNodeClosed = element;
  },

  get focusNodeOpened() {
    return this._focusNodeOpened;
  },
  set focusNodeOpened( element ) {
    this._focusNodeOpened = element;
  },

  open: function() {
    this.opened = true;
  }

});
</script>

</polymer-element>