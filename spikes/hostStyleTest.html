<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">

<script src="../../../tools/polymer/platform/platform.js" debug="true"></script>
<script src="../elements/elements.js"></script>

<style>
body,
button,
input {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 15px;
}

body {
    margin: 0.5in;
}
</style>

<script>
function foo( element ) {
    var root = element.webkitCreateShadowRoot();
    root.innerHTML = '<style>@host { * { color: red } }</style>' +
        '<div><content></content></div>';
}

function bar( element ) {
    var root = element.webkitCreateShadowRoot();
    root.innerHTML = '<div class="main">' +
        '<content></content>' +
        '</div>';
    foo(root.querySelector('div.main'));
}

function createComponents() {
    var elements = document.querySelectorAll( "[is]" );
    Array.prototype.forEach.call( elements, function( element ) {
        className = element.attributes.is.nodeValue;
        elementClass = window[ className ];
        new elementClass( element );
    });
}

window.addEventListener( "load", function() {
    createComponents();
});
</script>

</head>

<body>

<div is="bar">
    This is red.
</div>

<bar-element>
    Can this be red too?
</bar-element>

</body>

</html>
